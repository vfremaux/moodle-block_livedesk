/**
 * Javascript controller for controlling the sections.
 *
 * @module     block_livedesk/notyfication
 * @package    blocks
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_livedesk/notyfication",["jquery","core/config","core/str","core/log"],(function($,cfg,str,log){var ldskn;return ldskn={params:null,init:function(params){ldskn.params=params;str.get_strings([{key:"newmessages",component:"block_livedesk"}]).done((function(s){ldskn.strs=s})),log.debug("AMD Block Livedesk Notyfication initialized")},start:function(){setInterval(ldskn.get_unnotified_messages,ldskn.params.notification_refresh_time),log.debug("AMD Block Livedesk Notifycation started")},get_unnotified_messages:function(){var url=cfg.wwwroot+"/blocks/livedesk/ajax/service.php?";url+="action=get_unnotified_messages&",url+="course="+ldskn.params.courseid,$.post(url,(function(data){if(""!=data){void 0!==Noty&&Noty.closeAll();for(var dataarr=JSON.parse(data),key=0;key<dataarr.length;key++){var id=dataarr[key].id,message=dataarr[key].message,notification='<input name="noty_id'+id;notification+='" type="hidden" value='+id+' class="noty_message_num" />',notification+="<b>"+ldskn.strs[0]+"</b>",notification+="<div>"+message+"</div>",ldskn.generateNoty(notification,"information",id)}}}))},generateNoty:function(text,type){return new Noty({text:text,timeout:ldskn.params.notification_onscreen_time,closeWith:["button"],type:type,dismissQueue:!0,layout:ldskn.params.layout,theme:ldskn.params.theme}).show()}}}));

//# sourceMappingURL=notyfication.min.js.map