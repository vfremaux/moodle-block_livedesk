define(["jquery","core/config","core/str","core/log"],function(a,b,c,d){var e;return e={params:null,init:function(a){e.params=a;var b=[{key:"newmessages",component:"block_livedesk"}];c.get_strings(b).done(function(a){e.strs=a}),d.debug("AMD Block Livedesk Notyfication initialized")},start:function(){setInterval(e.get_unnotified_messages,e.params.notification_refresh_time),d.debug("AMD Block Livedesk Notifycation started")},get_unnotified_messages:function(){var c=b.wwwroot+"/blocks/livedesk/ajax/service.php?";c+="action=get_unnotified_messages&",c+="course="+e.params.courseid,a.post(c,function(a){if(""!=a){void 0!==Noty&&Noty.closeAll();for(var b=JSON.parse(a),c=0;c<b.length;c++){var d=b[c].id,f=b[c].message,g='<input name="noty_id'+d;g+='" type="hidden" value='+d+' class="noty_message_num" />',g+="<b>"+e.strs[0]+"</b>",g+="<div>"+f+"</div>",e.generateNoty(g,"information",d)}}})},generateNoty:function(a,b){var c=new Noty({text:a,timeout:e.params.notification_onscreen_time,closeWith:["button"],type:b,dismissQueue:!0,layout:e.params.layout,theme:e.params.theme}).show();return c}}});