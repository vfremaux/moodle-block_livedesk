{"version":3,"file":"discardbefore.min.js","sources":["../src/discardbefore.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     block_livedesk/livedeskdiscard\n * @package    blocks\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: true, undef:false\n// global dhtmlXCalendarObject\n/* eslint-disable no-undef */\ndefine(['jquery', 'core/config', 'core/log'], function ($, cfg, log) {\n\n    var livedeskdiscard = {\n\n        params: null,\n\n        init: function(params) {\n\n            livedeskdiscard.params = params;\n\n            var calendar = new dhtmlXCalendarObject(\"discard_date\");\n            calendar.setDate(livedeskdiscard.params['creationdate']);\n            calendar.setDateFormat(\"%d.%m.%Y %h:%i\");\n\n            $('#discard_btn').bind('click', this.discard_post_before_date);\n\n            log.debug('AMD livedesk discard initialized');\n        },\n\n        discard_post_before_update: function() {\n            var ddate = $('#discard_date').val();\n\n            var url = cfg.wwwroot + '/blocks/livedesk/ajax/service.php';\n            url += '?action=discard_post';\n            url += '&bid=' + livedeskdiscard.params['bid'];\n            url += '&livedeskid=' + livedeskdiscard.params['livedeskid'];\n            url += '&courseid=' + livedeskdiscard.params['courseid'];\n            url += '&date=' + ddate;\n\n            $.post(url, function() {\n                window.discard_messages_window.close();\n            });\n        }\n    };\n\n    return livedeskdiscard;\n});"],"names":["define","$","cfg","log","livedeskdiscard","params","init","calendar","dhtmlXCalendarObject","setDate","setDateFormat","bind","this","discard_post_before_date","debug","discard_post_before_update","ddate","val","url","wwwroot","post","window","discard_messages_window","close"],"mappings":";;;;;;;AAyBAA,sCAAO,CAAC,SAAU,cAAe,aAAa,SAAUC,EAAGC,IAAKC,SAExDC,gBAAkB,CAElBC,OAAQ,KAERC,KAAM,SAASD,QAEXD,gBAAgBC,OAASA,WAErBE,SAAW,IAAIC,qBAAqB,gBACxCD,SAASE,QAAQL,gBAAgBC,OAAhB,cACjBE,SAASG,cAAc,kBAEvBT,EAAE,gBAAgBU,KAAK,QAASC,KAAKC,0BAErCV,IAAIW,MAAM,qCAGdC,2BAA4B,eACpBC,MAAQf,EAAE,iBAAiBgB,MAE3BC,IAAMhB,IAAIiB,QAAU,oCACxBD,KAAO,uBACPA,KAAO,QAAUd,gBAAgBC,OAAhB,IACjBa,KAAO,eAAiBd,gBAAgBC,OAAhB,WACxBa,KAAO,aAAed,gBAAgBC,OAAhB,SACtBa,KAAO,SAAWF,MAElBf,EAAEmB,KAAKF,KAAK,WACRG,OAAOC,wBAAwBC,oBAKpCnB,eACV"}